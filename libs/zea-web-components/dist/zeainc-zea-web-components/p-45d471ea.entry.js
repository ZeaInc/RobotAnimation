import{r as t,h as i}from"./p-da09bae5.js";import"./p-f249487f.js";import"./p-b57dc4fe.js";import"./p-df6cbb31.js";import{u as s}from"./p-c2a9f8c6.js";import{N as o,y as e,U as r}from"./p-bfe34d1c.js";import{i as h}from"./p-06836bbf.js";const a=class{constructor(i){t(this,i),this.colorPickerHeight=200}handlewindowResize(){clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(()=>this.resizeColorPicker(),500)}resizeColorPicker(){this.colorPicker.resize(this.container.offsetWidth,this.colorPickerHeight)}componentDidLoad(){this.setUpColorPicker(),this.parameter&&(this.parameter.on("valueChanged",()=>{this.onValueChange()}),this.onValueChange())}onValueChange(){this.change||(this.undoing=!0,this.colorPicker.color.rgb=this.parameter.getValue().getAsRGBDict(),this.undoing=!1,this.sampleColor=this.colorPicker.color.hslString,this.setSampleTextColor())}setSampleTextColor(){this.sampleTextColor=`hsl(1, 0%, ${100-this.colorPicker.color.hsl.l}%)`}setUpColorPicker(){this.colorPicker=h.ColorPicker(this.colorPickerContainer,{width:this.container.offsetWidth,height:this.colorPickerHeight,anticlockwise:!0,borderWidth:0,borderColor:"#fff",sliderHeight:"10px",padding:1,sliderMargin:4,handleRadius:4,layout:[{component:h.ui.Slider,options:{sliderType:"hue"}},{component:h.ui.Slider,options:{sliderType:"saturation"}},{component:h.ui.Slider,options:{}}]}),this.colorPicker.on("input:start",()=>{this.change=new o(this.parameter),this.appData.undoRedoManager.addChange(this.change)}),this.colorPicker.on("input:end",()=>{this.change=void 0}),this.colorPicker.on("color:change",()=>{if(this.undoing)return;const t=new e;t.setFromRGBDict(this.colorPicker.color.rgb),this.sampleColor=this.colorPicker.color.hslString,this.setSampleTextColor(),this.change?this.change.update({value:t}):(this.change=new o(this.parameter,t),this.appData.undoRedoManager.addChange(this.change))})}render(){return clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(()=>this.resizeColorPicker(),500),i("div",{ref:t=>this.container=t,class:"zea-param-widget-material-color"},i("div",{style:{color:this.sampleTextColor,backgroundColor:this.sampleColor},class:"color-sample"},this.sampleColor),i("div",{ref:t=>this.colorPickerContainer=t,class:"color-picker"}))}};s.registerWidget("zea-param-widget-material-color",t=>t.constructor.name==r.name),a.style=":host,input,button,select,textarea{font-family:'Roboto', sans-serif}.zea-param-widget-material-color{color:var(--color-foreground-1)}.color-sample{height:30px;line-height:30px;border:1px solid var(--color-foreground-1);margin-bottom:0.5em;text-align:center;font-size:0.8em}";export{a as zea_param_widget_material_color}