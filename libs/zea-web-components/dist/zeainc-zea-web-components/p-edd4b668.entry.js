import{r as registerInstance,h,d as getElement,c as createEvent}from"./p-da09bae5.js";const zeaMenuCss="*{cursor:default;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}:host{display:inline-block;vertical-align:middle}:host,input,button,select,textarea{font-family:'Roboto', sans-serif}.zea-menu{color:var(--color-foreground-1);-ms-flex-direction:column;flex-direction:column}.zea-menu .items{display:none}.menu-anchor{color:var(--color-foreground-1)}.zea-menu.shown{color:var(--color-foreground-1);display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}.zea-menu.shown .items{display:-ms-inline-flexbox;display:inline-flex;-ms-flex-direction:column;flex-direction:column}.dropdown slot{display:-ms-flexbox;display:flex}.zea-menu.contextual{position:relative}.contextual.menu-wrap{display:inline-block;position:relative;vertical-align:middle}.contextual .items{position:absolute;z-index:1000}.contextual.show-anchor .items{margin-top:25px}.contextual.top-right .items{-webkit-transform:translateX(-100%);transform:translateX(-100%);margin-left:100%}.toolbar.horizontal .items{-ms-flex-direction:row;flex-direction:row}.toolbar{background-color:var(--color-background-2);position:fixed;border-radius:30px}.dropdown .items,.contextual .items{background-color:var(--color-background-2)}",ZeaMenu=class{constructor(t){registerInstance(this,t),this.offset=[0,0],this.leftOffset="",this.topOffset="",this.type="dropdown",this.orientation="vertical",this.shown=!1,this.showAnchor=!1,this.anchorIcon="ellipsis-vertical-circle-outline",this.contextualAlign="top-left"}handleClick(t){t.currentTarget!=this.anchorElement?("contextual"!=this.type||this.isDescendant(this.hostElement,t.target)||(this.shown=!1),this.mouseIsDown=!1):this.shown=!this.shown}isDescendant(t,e){let s=e.parentNode;for(;null!=s;){if(s==t)return!0;s=s.parentNode}return!1}handleItemClick(t){"contextual"!=this.type||t.detail.hasSubitems||(this.shown=!1)}mousedownHandler(t){"toolbar"==this.type&&"ZEA-MENU"==t.currentTarget.tagName&&(this.mouseIsDown=!0,this.offset=[this.menuElement.offsetLeft-t.clientX,this.menuElement.offsetTop-t.clientY])}mousemoveHandler(t){"toolbar"==this.type&&this.mouseIsDown&&(this.menuElement.style.left=t.clientX+this.offset[0]+"px",this.menuElement.style.top=t.clientY+this.offset[1]+"px")}handleAnchorClick(t){this.handleClick(t),t.stopPropagation()}componentDidLoad(){"contextual"!=this.type&&(this.shown=!0)}componentDidRender(){this.setupChildren(),this.adjustPosition()}setupChildren(){this.itemsContainer.querySelector("slot").assignedNodes().forEach(t=>{"type"in t&&(t.type=this.type),"itemParent"in t&&(t.itemParent=this.hostElement),"rootMenu"in t&&(t.rootMenu=this.hostElement)})}adjustPosition(){"contextual"==this.type&&this.adjustContextualPosition()}adjustContextualPosition(){if(this.shown){const t=window.innerHeight,e=window.innerWidth;this.itemsContainer.style.transform="translate(0, 0)";const s=this.itemsContainer.getBoundingClientRect(),i=this.menuElement.getBoundingClientRect();let o="0",r="0";i.left+s.width>e&&(o="-100%"),i.top+s.height>t&&(r="-100%"),this.itemsContainer.style.transform=`translate(${o}, ${r})`}}render(){const t="contextual"==this.type&&this.showAnchor?h("div",{onMouseUp:this.handleAnchorClick.bind(this),class:"menu-anchor",ref:t=>this.anchorElement=t},h("zea-icon",{name:this.anchorIcon})):null,e={"zea-menu":!0};return e[this.type]=!0,e[this.orientation]=!0,e.shown=this.shown,e[this.contextualAlign]=!0,e["show-anchor"]=this.showAnchor,h("div",{class:e,ref:t=>this.menuElement=t},t,h("div",{ref:t=>this.itemsContainer=t,class:"items",style:{top:this.topOffset,left:this.leftOffset}},h("slot",null)))}get hostElement(){return getElement(this)}};ZeaMenu.style=zeaMenuCss;const zeaMenuItemCss="*{cursor:default;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}:host,input,button,select,textarea{font-family:'Roboto', sans-serif}.zea-menu-item{position:relative}.outer-wrap{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;color:var(--color-foreground-1);position:relative}.toolbar .outer-wrap{background-color:transparent;border-radius:30px;margin:5px}.pressed .outer-wrap{background-color:var(--color-grey-3)}.active .outer-wrap{background-color:var(--color-grey-3)}.standalone:hover .outer-wrap{background-color:var(--color-grey-3)}.zea-menu-item:hover{background-color:var(--color-grey-3)}.zea-menu-item.toolbar:hover{background-color:transparent}.toolbar.pressed .outer-wrap{background-color:var(--color-background-2)}.toolbar.active .outer-wrap{background-color:var(--toolbar-active-bg-color, var(--color-grey-3));color:var(--toolbar-active-fg-color, var(--color-foreground-1))}.inner-wrap{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;font-size:12px;padding:0 10px;min-height:40px;white-space:nowrap;-ms-flex-positive:1;flex-grow:1}zea-switch{margin-left:0.5em;pointer-events:none}zea-checkbox{margin-right:0.5em;pointer-events:none}::slotted(zea-icon){margin-right:5px;font-size:10px;pointer-events:none}.toolbar .inner-wrap{padding:5px;min-height:auto}.toolbar ::slotted(zea-icon){margin-right:0}.hotkey{display:block;opacity:0.75;font-size:0.8em;padding-left:10px;pointer-events:none}.keyboard-key{border:1px solid var(--color-grey-3);padding:2px;border-radius:5px;font-size:0.8em;text-align:center;min-width:10px;display:inline-block;background-color:var(--color-background-1);text-transform:uppercase;margin:0 2px}",ZeaMenuItem=class{constructor(t){registerInstance(this,t),this.switch=!1,this.active=!1,this.hasCheckbox=!1,this.hasRadio=!1,this.checked=!1,this.shown=!1,this.allowHover=!1,this.hotkey="",this.type="",this.hasSubitems=!1,this.isPushButton=!1,this.zeaMenuItemClick=createEvent(this,"zeaMenuItemClick",7),this.zeaMenuItemPressed=createEvent(this,"zeaMenuItemPressed",7)}windowClickHandler(t){t.composedPath().includes(this.rootMenu)&&(this.active=!1,t.detail.active=!0,t.detail.hasSubitems||"toolbar"==this.type||(this.active=!1))}handleWindowMouseup(t){(this.isPushButton||!this.isDescendant(this.rootMenu,t.target)&&"toolbar"!=this.type)&&(this.active=!1)}handleWindowTouchend(t){(this.isPushButton||!this.isDescendant(this.rootMenu,t.target)&&"toolbar"!=this.type)&&(this.active=!1)}isDescendant(t,e){let s=e.parentNode;for(;null!=s;){if(s==t)return!0;s=s.parentNode}return!1}componentDidRender(){}watchHandler(){this.setupChildren()}setupChildren(){this.container.querySelector("slot").assignedElements().forEach(t=>{"ZEA-MENU-SUBITEMS"==t.tagName&&(this.hasSubitems=!0,this.subitemsElement=t,this.subitemsElement.rootMenu=this.rootMenu,this.subitemsElement.parentItem=this.hostElement,this.subitemsElement.type=this.hostElement.parentElement.type,this.outerWrap.appendChild(this.subitemsElement),this.container.classList.add("has-subitems"),"ZEA-MENU"==this.hostElement.parentElement.tagName&&(this.subitemsElement.belongsToRoot=!0))})}handleItemClick(t){this.zeaMenuItemClick.emit(this.hostElement),this.active=!0,this.runCallback(t)}handleItemMouseDown(){this.container.classList.add("pressed"),this.zeaMenuItemPressed.emit(this.hostElement),this.checked=!this.checked,this.isPushButton&&(this.active=!0)}handleItemMouseUp(t){this.container.classList.remove("pressed"),this.handleItemClick(t),this.hasSubitems||"toolbar"==this.type||(this.active=!1)}runCallback(payLoad){this.callback&&("string"==typeof this.callback?eval(this.callback):this.callback(payLoad))}keydownHandler(t){if(t.target instanceof HTMLInputElement)return;const e=[];t.shiftKey&&e.push("shift"),t.altKey&&e.push("alt"),t.metaKey&&e.push("ctrl"),t.ctrlKey&&e.push("ctrl"),"Alt"!=t.key&&"Control"!=t.key&&"Ctrl"!=t.key&&"Shift"!=t.key&&e.push(t.key),e.join("+").toLowerCase()==this.hotkey.toLowerCase()&&this.handleItemClick(new MouseEvent("click")),t.preventDefault()}keyComboAsHtml(){const t=this.hotkey.split("+"),e=[];return t.forEach(t=>{"ctrl"==(t=t.toLowerCase())?(e.push(h("span",{class:"keyboard-key"},"Ctrl")),e.push("+")):"alt"==t?(e.push(h("span",{class:"keyboard-key"},"Alt")),e.push("+")):"shift"==t?(e.push(h("span",{class:"keyboard-key"},"Shift")),e.push("+")):e.push(h("span",{class:"keyboard-key"},t))}),e}render(){return h("div",{ref:t=>this.container=t,class:`zea-menu-item ${this.type} ${this.active?"active":""} ${this.allowHover?"allow-hover":""}`},h("div",{class:"outer-wrap",ref:t=>this.outerWrap=t},h("div",{class:"inner-wrap",onMouseDown:this.handleItemMouseDown.bind(this),onMouseUp:this.handleItemMouseUp.bind(this),onTouchStart:this.handleItemMouseDown.bind(this),onTouchEnd:this.handleItemMouseUp.bind(this)},this.hasCheckbox?h("zea-checkbox",{isRadio:this.hasRadio,checked:this.checked,ref:t=>this.checkboxElement=t}):null,h("slot",null),this.switch?h("zea-switch",{checked:this.checked}):null,this.hotkey?h("span",{class:"hotkey"},this.keyComboAsHtml()):null)))}get hostElement(){return getElement(this)}static get watchers(){return{rootMenu:["watchHandler"]}}};ZeaMenuItem.style=zeaMenuItemCss;const zeaMenuSeparatorCss=".ruler{overflow:hidden;margin:0;height:1px;background-color:var(--color-grey-3)}.zea-menu-separator{}.zea-menu-separator.vertical{height:24px;width:21px}.vertical .ruler{width:1px;margin:0 10px;height:100%}.dropdown .ruler{height:100%;width:1px}",ZeaMenuSeparator=class{constructor(t){registerInstance(this,t),this.class="",this.orientation="horizontal"}render(){return h("div",{class:`zea-menu-separator ${this.class} ${this.orientation}`},h("div",{class:"ruler"}))}};ZeaMenuSeparator.style=zeaMenuSeparatorCss;export{ZeaMenu as zea_menu,ZeaMenuItem as zea_menu_item,ZeaMenuSeparator as zea_menu_separator}